const btn = document.querySelector("#clickbtn");
const lowercontent = document.querySelector(".lowercontent");
const container = document.querySelector(".container");

btn.addEventListener("click", () => {
  // container.style.height = "90vh";
  lowercontent.style.display = "flex";
});

/* main game code */

let randomnumber = parseInt(Math.random() * 100 + 1);

const submitbtn = document.querySelector("#submitbtn");
const userinput = document.querySelector("#userinput");
const guessslot = document.querySelector("#previousguess");
const guessremaining = document.querySelector("#guessremaining");
const lowhi = document.querySelector("#lowhigh");
const startover = document.querySelector(".resultparas");

let playgame = true;
let previousguesses = [];
let remaininguess = 5;

let p = document.createElement("p");

if (playgame == true) {
  submitbtn.addEventListener("click", function (e) {
    e.preventDefault();
    const userguess = parseInt(userinput.value);
    validateguess(userguess);
  });
}

function validateguess(userguess) {
  if (isNaN(userguess)) {
    alert("plz enter a valid number");
  } else if (userguess < 1) {
    alert("plz enter a number greater than 1");
  } else if (userguess > 100) {
    alert("plz enter a number smaller than 100 ");
  } else {
    previousguesses.push(userguess);
    if (remaininguess === 1) {
      displayguess(userguess);
      displaymsg(`Game Over  Random number was  ${randomnumber}`);
      endgame();
    } else {
      displayguess(userguess);
      checkguess(userguess);
    }
  }
}

// function checkguess(userguess) {
//   if (userguess === randomnumber) {
//     displaymsg(`you guessed it right`);
//     endgame();
//   } else if (userguess > randomnumber) {
//     displaymsg(`Number is TOOO High`);
//   } else if (userguess < randomnumber) {
//     displaymsg(`Number is TOOO Low`);
//   }
// }

// function checkguess(userguess) {
//   if (userguess === randomnumber) {
//     displaymsg(`you guessed it right`);
//     endgame();
//   } else if (userguess > randomnumber) {
//     displaymsg(`Number is TOOO High`);
//   } else if (userguess > randomnumber - 10) {
//     displaymsg(`Number is slight High try guessing slight low`);
//   } else if (userguess < randomnumber) {
//     displaymsg(`Number is TOOO Low`);
//   }else if (userguess < randomnumber + 10) {
//     displaymsg(`Number is slight Low try guessing slight hight`);
//   }
// }

function checkguess(userguess) {
  //Raunak's version
  if (userguess == randomnumber) {
    //if right guess
    displaymsg(`You guessed it right.`);
    endgame();
  } else if (userguess > randomnumber) {
    //if higher guess check again if even much higher than 10
    if (userguess > randomnumber + 10) {
      displaymsg("Your guess is too high.");
    } else {
      displaymsg("Your guess is slightly high, too close.");
    }
  } else if (userguess < randomnumber) {
    //if lower guess check again if even much lower than 10
    if (userguess < randomnumber - 10) {
      displaymsg("Your guess is too low.");
    } else {
      displaymsg("Your guess is slightly low, too close.");
    }
  }
}

// function checkguess(userguess) {
//   if (userguess === randomnumber) {
//     displaymsg(`you guessed it right`);
//     endgame();
//   } else if (userguess > randomnumber) {
//     displaymsg(`Number is TOOO High`);
//     if (userguess > randomnumber - 10) {
//       displaymsg(`Number is slight High try guessing slight low`);
//     }
//   } else if (userguess < randomnumber) {
//     displaymsg(`Number is TOOO Low`);
//     if (userguess < randomnumber + 10) {
//       displaymsg(`Number is slight Low try guessing slight high`);
//     }
//   }
// }

function displayguess(userguess) {
  userinput.value = "";
  guessslot.innerHTML += `${userguess},  `;
  guessslot.style.backgroundColor = "#000";
  guessslot.style.padding = "5px";
  guessslot.style.borderRadius = "10px";
  remaininguess--;
  // guessremaining.innerHTML = `${5 - remaininguess}`;
  guessremaining.innerHTML = remaininguess;
  guessremaining.style.backgroundColor = "#000";
  guessremaining.style.padding = "5px";
  guessremaining.style.borderRadius = "10px";
}

function displaymsg(message) {
  lowhi.innerHTML = `<h2>${message}</h2>`;
}

function endgame() {
  userinput.value = "";
  userinput.setAttribute("disabled", "");
  p.classList.add("button");
  p.innerHTML = '<h3 id="startoverbtn">Restart</h3>';
  startover.appendChild(p);
  playgame = false;
  newgame();
}

function newgame() {
  const startoverbtn = document.querySelector("#startoverbtn");
  startoverbtn.addEventListener("click", (e) => {
    randomnumber = parseInt(Math.random() * 100 + 1);
    previousguesses = [];
    remaininguess = 5;
    guessslot.innerHTML = " ";
    // guessremaining.innerHTML = `${5 - remaininguess}`;
    guessremaining.innerHTML = remaininguess;
    userinput.removeAttribute("disabled");
    startover.removeChild(p);
    lowhi.innerHTML = "";
    playgame = true;
  });
}
